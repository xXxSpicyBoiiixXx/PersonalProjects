#!/usr/bin/python

# FILE: Netcat_Dimitri.py
# USAGE: ./Netcat_Dimitri.py
# DESCRIPTION: A replacement for Netcat where a system may not have netcat installed but they do have python. I would suggest to transfer this file over through any means to the target machines with minimal noise. 
# OPTIONS:
# -l --listen	- listen on [host]:[port] for incoming connection 
# -e --execute=file_to_run	-execute the given file upon receiving a connection 
# -c --command	- initizlize a command shell
# -u --upload=destination	- upon receiving connection upload a file and write to [destination]
# REQUIREMENTS: There must be the -t and -p flag. The -t is the target machine and -p is the port. 
# BUGS: -- 
# AUTHOR: xXxSpicyBoiiixXx
# ORGANIZATION: -- 
# VERSION: 1.0
# CREATED: 03/06/2020
# REVISION: --

import sys
import socket
import getopt 
import threading 
import subprocess 

# Define some global variables 
listen			= False 
command			= False
uplaod			= False
execute			= ""
target			= ""
upload_destination	= ""
port			= 0 

# Useful information prints out if command line parameters don't match
def usage(): 
	print "Dimitri (xXxSpicyBoiiixXx) Net Tool"
	print 
	print "Usage: ./Netcat_Dimitri.py -t target_host -p port" 
	print "-l --listen	- listen on [host]:[port] for incoming connections"
	print "-e --execute=file_to_run		- execute the given file upon receiving a connection"
	print "-c --command	- initialize a command shell" 
	print "-u --upload=destination		- upon receiving connection upload a file and write to [destination]"
	print
	print
	print "Examples: "
	print "./Netcat_Dimitri.py -t 192.168.0.1 -p 5555 -l -c"
	print "./Netcat_Dimitri.py -t 192.168.0.1 -p 5555 -l -u=\\target.exe"
	print "./Netcat_Dimitri.py -t 192.168.0.1 -p 5555 -l -e=\"cat /etc/passwd\""
	print "echo 'xXxSpicyBoiiixXx' | ./Netcat_Dimitri.py -t 192.168.0.1 -p 135"
	sys.exit(0)

def main():
	global listen
	global port
	global execute 
	global command
	global upload_destination
	global target 

	if not len(sys.argv[1:]):
		usage() 

		  
