#!/bin/bash

# FILE: simple_zone_transfer.sh
# USAGE: ./simple_zone_transfer.sh <domain name>
# DESCRIPTION: A simple zone transfer using bash script. 
# OPTIONS: -- 
# REQUIREMENTS: Must have a domain name. 
# BUGS: -- 
# AUTHOR: xXxSpicyBoiiixXx
# ORGANIZATION: -- 
# VERSION: 1.0
# CREATED: 03/07/2020
# REVISION: --

# $1 is the first arguemnt given after the bash script, this will insure that the user has given an input. If not, this prints out the useage. 
if [ -z "$1" ]; then
	
	echo "[&] Simple Zone Transfer Script"
	echo "[&] Useage : $0 <domain name>"

	exit 0 
fi 

# If an arguement is given by the user, identify the DNS servers for the domain
for server in $(host -t ns $1 | cut -d " " -f4); do 

# For each of these servers, attempt a zone transfer
	host -l $1 $server | grep "has address"

done	
